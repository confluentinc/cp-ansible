---
### USM Agent Basic Authentication + TLS
##
## The following is an example inventory file for setting up Confluent Platform with
## USM Agent configured with basic authentication and TLS (HTTPS with username/password)

all:
  vars:
    ansible_connection: ssh
    ansible_user: ec2-user
    ansible_become: true
    ansible_ssh_private_key_file: /home/ec2-user/guest.pem

    # Kafka Cluster Configuration
    kafka_broker_cluster_name: "usm-agent-basic-auth-tls-cluster"
    kafka_broker_cluster_id: "ZmHIw3BUS2W8tuZ-9LIOyg"
    kafka_cluster_id: "{{ kafka_broker_cluster_id }}"

    # SSL Configuration - no TLS setup for CP components (this can be removed but is specified here for clarity)
    ssl_enabled: false
    ssl_mutual_auth_enabled: false

    # USM Agent CCloud Configuration
    usm_agent_ccloud_credential:
      username: "your-ccloud-api-key"
      password: "your-ccloud-api-secret"
    usm_agent_ccloud_host: "https://api.confluent.cloud"
    usm_agent_ccloud_environment_id: "env-123456"

    # USM Agent Authentication Configuration - BASIC AUTHENTICATION
    usm_agent_basic_auth_enabled: true
    usm_agent_ssl_enabled: true
    usm_agent_ssl_mutual_auth_enabled: false
    # USM Agent Basic Users Configuration
    usm_agent_basic_users:
      admin:
        principal: admin
        password: admin-secret
      user1:
        principal: user1
        password: user1-secret
      user2:
        principal: user2
        password: user2-secret

    # Client credentials for USM Agent (required for basic auth)
    usm_agent_client_username: "user1"
    usm_agent_client_password: "user1-secret"

    # SSL Certificate Configuration for USM Agent to use custom certs. If not set, ansible will generate self signed certs.
    # ssl_custom_certs: true
    # ssl_ca_cert_filepath: "/generated_ssl_files/caBundle.pem"
    # ssl_signed_cert_filepath: "/generated_ssl_files/{{inventory_hostname}}.chain"
    # ssl_key_filepath: "/generated_ssl_files/{{inventory_hostname}}.key"

usm_agent:
  hosts:
    usm-agent1.confluent.io:

kafka_controller:
  hosts:
    controller1.confluent.io:

kafka_broker:
  hosts:
    kfk[01:03].confluent.io:

kafka_connect:
  hosts:
    kafka-connect1.confluent.io:
