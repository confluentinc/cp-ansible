---
- name: Import variables
  import_role:
    name: variables

- name: Validate Schema Exporter Prerequisites
  assert:
    that:
      - schema_exporters is defined and schema_exporters | length > 0
      - item.name is defined
      - item.config is defined
    fail_msg: "Schema exporter requires proper configuration with name and config"
  loop: "{{ schema_exporters }}"


- name: Process Schema Exporters
  include_tasks: process_exporter.yml
  vars:
    exporter: "{{ item }}"
  loop: "{{ schema_exporters }}"