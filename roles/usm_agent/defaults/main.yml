---
# More usm_agent variables are defined in the variables role
usm_agent_health_check_delay: 30

# For following dictionaries, Key/Value Pairs with empty values will not be written into override.conf

### Overrides to the Service Section of USM Agent Systemd File. This variable is a dictionary.
usm_agent_service_overrides:
  LimitNOFILE: 100000
  User: "{{ usm_agent_default_user }}"
  Group: "{{ usm_agent_default_group }}"
  ExecStart: "{% if installation_method == 'archive' %}{{ usm_agent_binary_base_path }}/bin/usm-agent {{ usm_agent.config_file }}{% endif %}"

### Environment Variables to be added to the USM Agent Service. This variable is a dictionary.
usm_agent_service_environment_overrides:
  # Remove trailing slash if there is one
  LOG_DIR: "{{ usm_agent.log_dir|regex_replace('\\/$', '') }}"
  CONFLUENT_SECURITY_MASTER_KEY: "{% if usm_agent_secrets_protection_enabled|bool %}{{secrets_protection_masterkey}}{% endif %}"

### Overrides to the Unit Section of USM Agent Systemd File. This variable is a dictionary.
usm_agent_service_unit_overrides:

usm_agent_secrets_protection_file: "{{ ssl_file_dir_final }}/usm-agent-security.properties"
usm_agent_health_check_enabled: true
