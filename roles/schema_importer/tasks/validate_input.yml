---
- name: Validate Schema Importer Prerequisites
  assert:
    that:
      - schema_importers is defined
      - schema_importers is not none
      - schema_importers | length > 0
      - password_encoder_secret is defined
      - password_encoder_secret != ''
    fail_msg: "Schema importer requires proper configuration."

- name: Validate individual Schema Importer configurations
  assert:
    that:
      - item.name is defined
      - item.config is defined
    fail_msg: "Schema importer '{{ item.name | default('unnamed') }}' requires proper configuration with name and config."
  loop: "{{ schema_importers | default([]) }}"
  when: schema_importers is defined and schema_importers is not none
