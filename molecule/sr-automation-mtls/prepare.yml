---
### SR Automation Workflow Test Environment Preparation - mTLS
### Imports base preparation and adds mTLS specific setup

- import_playbook: ../base_templates/sr_automation_prepare_base.yml

- name: mTLS Specific Preparation
  hosts: all
  gather_facts: false
  tasks:
    - name: Verify certificate generation for mTLS
      stat:
        path: "{{ ssl_file_dir_final }}/schema_registry.crt"
      register: cert_check
      when: ssl_mutual_auth_enabled | default(false)
