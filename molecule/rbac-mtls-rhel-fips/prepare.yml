---
- name: Create Custom Certs
  import_playbook: ../certificates.yml

- name: Download package tar
  get_url:
    url: "{{ confluent_archive_url }}"
    dest: "{{ confluent_archive_file_source }}"
    mode: '0644'

- name: Install and configure OpenLDAP
  hosts: ldap_server
  tasks:
    - import_role:
        name: confluent.test.ldap

- name: Install Zookeeper Cluster
  import_playbook: confluent.platform.all
  when: lookup('env', 'MIGRATION')|default('false') == 'true'
