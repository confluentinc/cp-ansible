---
### SR Automation Workflow Test Environment Preparation - LDAP + mTLS
### Includes base preparation and adds LDAP + mTLS specific setup

- name: Install and configure OpenLDAP
  hosts: ldap_server
  tasks:
    - import_role:
        name: confluent.test.ldap

- name: Configure IPv6 Preference
  import_playbook: ../configure_ipv6.yml

- name: Setup VM DNS
  import_playbook: ../dns.yml

- import_playbook: ../certificates.yml
  when: ssl_enabled | default(false)

- name: Setup Mock CC Cluster First (Standard Groups)
  import_playbook: confluent.platform.all