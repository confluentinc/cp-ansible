---
### SR Automation Workflow Test Environment Preparation - Plaintext/No Auth
### Imports base preparation and adds plaintext-specific setup

- import_playbook: ../base_templates/sr_automation_prepare_base.yml

- name: Plaintext-Specific Preparation
  hosts: all
  gather_facts: false
  tasks:
    - name: Log plaintext scenario setup
      debug:
        msg: |
          Preparing SR Automation Testing for Plaintext/No Auth scenario:
          - No SSL/TLS certificates needed
          - No authentication setup required
          - Simplified HTTP-only communication
          - Focus on core automation functionality testing
      run_once: true

- name: Verify Plaintext Configuration
  hosts: schema_registry
  gather_facts: false
  tasks:
    - name: Verify plaintext environment variables
      assert:
        that:
          - ssl_enabled | default(true) == false
          - schema_registry_http_protocol | default('https') == 'http'
          - unified_stream_manager.schema_registry_endpoint is match('^http://.*')
        fail_msg: "Plaintext scenario configuration validation failed"

    - name: Display plaintext scenario readiness
      debug:
        msg: |
          âœ“ Plaintext SR Automation Test Environment Ready
          - HTTP endpoints configured
          - No authentication required
          - Core automation features will be tested
          - Ready for schema export/import workflow testing