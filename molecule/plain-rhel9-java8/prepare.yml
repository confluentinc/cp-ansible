---
- name: Prepare
  hosts: localhost
  connection: local
  gather_facts: false
  tasks:
    - name: Create local_plugins directory
      file:
        state: directory
        path: /tmp/local_plugins
        mode: 0755
    - name: Prepare kafka connect plugins on ansible controller
      get_url:
        url: "{{ item }}"
        dest: /tmp/local_plugins/
      with_items:
        - "https://d1i4a15mxbxib1.cloudfront.net/api/plugins/confluentinc/kafka-connect-gcp-functions/versions/1.1.9/confluentinc-kafka-connect-gcp-functions-1.1.9.zip"
        - "https://d1i4a15mxbxib1.cloudfront.net/api/plugins/confluentinc/kafka-connect-azure-data-lake-gen2-storage/versions/1.6.15/confluentinc-kafka-connect-azure-data-lake-gen2-storage-1.6.15.zip"
